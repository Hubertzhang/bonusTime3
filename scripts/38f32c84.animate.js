function init(){var a=document.querySelector(".ip-slideshow");canvas=document.createElement("canvas"),canvas.width=innerWidth,canvas.height=600,a.appendChild(canvas),context=canvas.getContext("2d"),createParticles()}function createParticles(){for(var a=0,b=200;b>a;a++){var c,d,e=2*Math.PI*a/b;c=.5*canvas.width+10*Math.cos(e),d=180+10*Math.sin(e);var f=randomBetween(0,12),g=!(f>0||12>f),h=colors[10][Math.floor(Math.random()*colors[10].length)];particles.push({x:c,y:d,hasBorn:g,ease:.04+.06*Math.random(),bornSpeed:.07+.07*Math.random(),alpha:0,maxAlpha:.7+.4*Math.random(),radius:f,maxRadius:12,color:h,angle:0,steps:e})}loop()}function loop(){clear(),update(),render(),requestAnimFrame(loop)}function clear(){context.clearRect(0,0,canvas.width,canvas.height)}function updataTransition(){[].forEach.call(particles,function(a,b){switch(currentLayout){case 0:shape.x=.5*canvas.width+85*Math.cos(a.steps),shape.y=180+140*Math.sin(a.steps);break;case 1:100>b?(shape.x=.5*canvas.width+1,shape.y=40+280*(b/100)):(shape.x=.5*canvas.width-1,shape.y=320-(b-100)/100*280);break;case 2:if(87>b){var c=5*Math.PI/4*b/87;shape.x=.5*canvas.width-85*Math.cos(c),shape.y=113-85*Math.sin(c)}else 156>b?(shape.x=.5*canvas.width+60-145*(b-87)/69,shape.y=173+147*(b-87)/69):(shape.x=.5*canvas.width-85+170*(b-156)/44,shape.y=320);break;case 3:if(93>b){var c=5*Math.PI/4*b/93-Math.PI/4;shape.x=.5*canvas.width+65*Math.sin(c),shape.y=105-65*Math.cos(c)}else{var c=5*Math.PI/4*(b-93)/107;shape.x=.5*canvas.width+75*Math.sin(c),shape.y=245-75*Math.cos(c)}break;case 4:76>b?(shape.x=50+.5*canvas.width,shape.y=280*b/76+40):127>b?(shape.y=227,shape.x=.5*canvas.width-93+186*(b-76)/51):(shape.x=.5*canvas.width+50-143*(b-127)/73,shape.y=40+187*(b-127)/73);break;case 5:if(46>b)shape.y=40,shape.x=.5*canvas.width-75+150*b/46;else if(86>b)shape.x=.5*canvas.width-75,shape.y=40+100*(b-46)/40;else if(109>b)shape.y=140,shape.x=.5*canvas.width-75+75*(b-86)/23;else{var c=19*Math.PI/14*(b-109)/91;shape.x=.5*canvas.width+90*Math.sin(c),shape.y=230-90*Math.cos(c)}break;case 6:if(60>b){var c=Math.PI*b/60;shape.x=.5*canvas.width+85*Math.cos(c),shape.y=125-85*Math.sin(c)}else if(80>b)shape.x=.5*canvas.width-85,shape.y=125+110*(b-60)/20;else{var c=2*Math.PI*(b-80)/120;shape.x=.5*canvas.width+85*Math.sin(c),shape.y=235+85*Math.cos(c)}break;case 7:70>b?(shape.y=40,shape.x=.5*canvas.width-85+170*b/70):(shape.x=.5*canvas.width+85-100*(b-70)/130,shape.y=40+280*(b-70)/130);break;case 8:if(92>b){var c=2*Math.PI*b/92;shape.x=.5*canvas.width+65*Math.sin(c),shape.y=105+65*Math.cos(c)}else{var c=2*Math.PI*(b-92)/108;shape.x=.5*canvas.width+75*Math.sin(c),shape.y=245+75*Math.cos(c)}break;case 9:if(60>b){var c=Math.PI*b/60;shape.x=.5*canvas.width+85*Math.cos(c),shape.y=235+85*Math.sin(c)}else if(80>b)shape.x=.5*canvas.width+85,shape.y=235-110*(b-60)/20;else{var c=2*Math.PI*(b-80)/120;shape.x=.5*canvas.width+85*Math.sin(c),shape.y=125+85*Math.cos(c)}break;case 10:shape.x=.5*canvas.width+140*Math.sin(a.steps),shape.y=180+140*Math.cos(a.steps);break;case 11:var d,c;d=.5*particles.length-1,c=2*Math.PI*b/d,b<[].slice.call(particles,0,d).length?(shape.x=.5*canvas.width+80*Math.cos(c),shape.y=180+140*Math.sin(c)):(d=.5*particles.length,shape.x=.5*canvas.width+140*Math.cos(c),shape.y=180+80*Math.sin(c));break;case 12:shape.x=.5*canvas.width+90*(1-Math.sin(b))*Math.cos(b),shape.y=320+140*(-Math.sin(b)-1);break;case 13:shape.x=.5*canvas.width+90*Math.sin(b)*Math.cos(b),shape.y=320+140*(-Math.sin(b)-1)}a.x+=.08*(shape.x+5*Math.cos(a.angle)-a.x),a.y+=.08*(shape.y+5*Math.sin(a.angle)-a.y),a.angle+=.08})}function update(){updataTransition(),[].forEach.call(particles,function(a){a.alpha+=.05*(a.maxAlpha-a.alpha),a.hasBorn?(a.radius+=(0-a.radius)*a.bornSpeed,0===Math.round(a.radius)&&(a.color=colors[currentLayout][Math.floor(Math.random()*colors[currentLayout].length)],a.hasBorn=!1)):(a.radius+=(a.maxRadius-a.radius)*a.bornSpeed,Math.round(a.radius)===a.maxRadius&&(a.hasBorn=!0))})}function render(){[].forEach.call(particles,function(a){context.save(),context.globalAlpha=a.alpha,context.fillStyle=a.color,context.beginPath(),context.arc(a.x,a.y,a.radius,0,2*Math.PI),context.fill(),context.restore()})}function randomBetween(a,b){return Math.floor(Math.random()*(b-a+1)+a)}function onClickBtn(){currentLayout++,currentLayout%=14}var self=window,canvas,context,particles=[],maxHundredNum=7,text=[],nextText=[],shape={},FPS=20,type=["circle","ovals","drop","ribbon"],currentNum=0,currentLayout=0,step=0,word="马戏团",colors=[["#e67e22","#2c3e50"],["#c0392b","#ff7e15"],["#1d75cf","#3a5945"],["#702744","#f98d00"],["#e67e22","#2c3e50"],["#c0392b","#ff7e15"],["#1d75cf","#3a5945"],["#702744","#f98d00"],["#e67e22","#2c3e50"],["#c0392b","#ff7e15"],["#e67e22","#2c3e50"],["#c0392b","#ff7e15"],["#1d75cf","#3a5945"],["#702744","#f98d00"]];window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/FPS)}}(),window.onload=init;